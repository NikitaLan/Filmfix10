!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a);var o=a("bpxeT"),d=a("2TvXO"),c=a("jVDuT"),u=a("gIqCw"),i={watchedBtn:document.querySelector(".btn-watched"),queueBtn:document.querySelector(".btn-queue"),watchedList:document.querySelector(".gallery-library__list"),textOoops:document.querySelector(".empty")};console.log(i.queueBtn);var l="https://api.themoviedb.org/3/movie/",s="3dd9518c386fd347d5f1ac2580a699a4",m=function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}};function f(e){return h.apply(this,arguments)}function h(){return(h=e(o)(e(d).mark((function t(n){var r,a;return e(d).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(l).concat(n,"?api_key=").concat(s,"&language=en-US"));case 2:return r=e.sent,e.next=5,r.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}i.watchedBtn.addEventListener("click",(function(){m("watched").map((function(e){f(e).then((function(e){var t=i.watchedList.insertAdjacentHTML("beforeend",(0,c.makeLibraryGalleryMarkUp)(e));return(0,u.default)(),t}))})),i.textOoops.classList.add("visually-hidden"),i.watchedList.classList.remove("visually-hidden")})),i.queueBtn.addEventListener("click",(function(){m("queue").map((function(e){f(e).then((function(e){var t=i.watchedList.insertAdjacentHTML("beforeend",(0,c.makeLibraryGalleryMarkUp)(e));return(0,u.default)(),t}))})),i.textOoops.classList.add("visually-hidden"),i.watchedList.classList.remove("visually-hidden")})),console.dir(i.watchedList);document.querySelector(".btn-queue"),document.querySelector(".gallery-library__list"),document.querySelector(".empty");o=a("bpxeT"),d=a("2TvXO");var v=a("kPudI"),p=a("4mCOx"),y=a("juZTq"),b=a("h4oNJ"),g={libraryListOfWatched:document.querySelector(".gallery-library__list"),btnAddToWatched:document.querySelector(".modal-movie__add-to-watched-btn"),btnQueue:document.querySelector(".modal-movie__add-to-queue-btn")};function q(){return(q=e(o)(e(d).mark((function t(n){var r;return e(d).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.target.dataset.id,(0,b.createArrayLocalStorage)("watched"),(0,b.createArrayLocalStorage)("queue"),(0,b.renameBtn)(g.btnAddToWatched,"watched","Add to watched","Remove from watched",r),(0,b.renameBtn)(g.btnQueue,"queue","Add to queue","Remove from queue",r),w=(0,p.fetchPictures)(r),"IMG"===n.target.nodeName||"P"===n.target.nodeName||"H2"===n.target.nodeName||"H3"===n.target.nodeName||"B"===n.target.nodeName){e.next=8;break}return e.abrupt("return");case 8:(0,v.handleModalOpenClose)(),(0,y.handleApiData)(r),document.body.style.overflow="hidden";case 11:case"end":return e.stop()}}),t)})))).apply(this,arguments)}g.libraryListOfWatched.addEventListener("click",(function(e){return q.apply(this,arguments)})),(0,b.removeLocalStorage)("watched"),(0,b.removeLocalStorage)("queue");var w={},L=document.querySelector(".modal-movie__add-to-watched-btn"),S=document.querySelector(".modal-movie__add-to-queue-btn");L.addEventListener("click",(function(){w.then((function(e){var t=(0,b.loadFromLocalStorage)("watched");if(t.includes(e.id)){var n=t.findIndex((function(t){return t===e.id}));t.splice(n,1),localStorage.setItem("watched",JSON.stringify(t)),(0,b.renameBtnTextCont)(L,"Add to watched"),L.classList.remove("active-btn")}else t.push(e.id),(0,b.saveToLocalStorage)("watched",t),(0,b.renameBtnTextCont)(L,"Remove from watched"),L.classList.add("active-btn")}))})),S.addEventListener("click",(function(){w.then((function(e){var t=(0,b.loadFromLocalStorage)("queue");if(t.includes(e.id)){var n=t.findIndex((function(t){return t===e.id}));t.splice(n,1),localStorage.setItem("queue",JSON.stringify(t)),(0,b.renameBtnTextCont)(S,"Add to queue"),S.classList.remove("active-btn")}else t.push(e.id),(0,b.saveToLocalStorage)("queue",t),(0,b.renameBtnTextCont)(S,"Remove from queue"),S.classList.add("active-btn")}))}))}();
//# sourceMappingURL=library.fc0f1c44.js.map
