{"mappings":"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","sources":["src/js/whatched-list.js","src/js/queue-list.js","src/js/library-modal.js"],"sourcesContent":["import { makeLibraryGalleryMarkUp } from '../js/makeGalleryMarkUpCard';\nimport makeRatingColor from './ratingColor';\nconst refs = {\n  watchedBtn: document.querySelector('.btn-watched'),\n  queueBtn: document.querySelector('.btn-queue'),\n\n  watchedList: document.querySelector('.gallery-library__list'),\n  textOoops: document.querySelector('.empty'),\n};\nconsole.log(refs.queueBtn);\n\nconst STORAGE_KEY_WATCHED = 'watched';\nconst STORAGE_KEY_QUEUE = 'queue';\nconst BASE_URL = 'https://api.themoviedb.org/3/movie/';\nconst API_KEY = '3dd9518c386fd347d5f1ac2580a699a4';\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\nasync function getMovieInfoById(movieID) {\n  const resp = await fetch(\n    `${BASE_URL}${movieID}?api_key=${API_KEY}&language=en-US`\n  );\n  const respData = await resp.json();\n\n  return respData;\n}\n\nrefs.watchedBtn.addEventListener('click', takeListFromStorageWatched);\nrefs.queueBtn.addEventListener('click', takeListFromStorageQueue);\n\nfunction takeListFromStorageWatched() {\n  const listFromStorage = load(STORAGE_KEY_WATCHED);\n//   console.log(listFromStorage);\n//   if(!listFromStorage && listFromStorage == []) {\n//     refs.watchedList.innerHTML = ''\n//     return\n//   }\n\n  listFromStorage.map(el => {\n    getMovieInfoById(el).then(data => {\n      const markUp = refs.watchedList.insertAdjacentHTML(\n        'beforeend',\n        makeLibraryGalleryMarkUp(data)\n      );\n      makeRatingColor()\n      return markUp;\n    });\n  });\n  refs.textOoops.classList.add('visually-hidden');\n  refs.watchedList.classList.remove('visually-hidden');\n}\nconsole.dir(refs.watchedList);\nfunction takeListFromStorageQueue() {\n    const listFromStorage = load(STORAGE_KEY_QUEUE);\n    listFromStorage.map(el => {\n      getMovieInfoById(el).then(data => {\n        const markUp = refs.watchedList.insertAdjacentHTML(\n          'beforeend',\n          makeLibraryGalleryMarkUp(data)\n        );\n        makeRatingColor()\n        return markUp;\n      });\n    });\n    refs.textOoops.classList.add('visually-hidden');\n    refs.watchedList.classList.remove('visually-hidden');\n}","const refs = {\n  queueBtn: document.querySelector('.btn-queue'),\n  queueList: document.querySelector('.gallery-library__list'),\n  textOoops: document.querySelector('.empty'),\n};\n\nconst STORAGE_KEY = 'queue-list';\nlet queueList = {};\n\n// refs.watchedBtn.addEventListener('click', takeListFromStorage);\n\nfunction takeListFromStorage() {\n  console.log('click on btn Queue');\n  const listFromStorage = localStorage.getItem(STORAGE_KEY);\n  queueList = JSON.parse(listFromStorage);\n  console.log(queueList.results);\n  refs.watchedList.insertAdjacentHTML(\n    'afterbegin',\n    cardMarkup(queueList.results)\n  );\n  refs.textOoops.classList.add('visually-hidden');\n  refs.watchedList.classList.remove('visually-hidden');\n}\n","'use strict';\n\nimport { handleModalOpenClose } from './movie-modal/handle-modal-close';\nimport { fetchPictures } from './movie-modal/fetch-from-API';\nimport { handleApiData } from './movie-modal/handle-API-data';\n\nimport {\n  createArrayLocalStorage,\n  loadFromLocalStorage,\n  removeLocalStorage,\n  saveToLocalStorage,\n  renameBtn,\n  renameBtnTextCont,\n} from './watched-queue-btns/fun-watched-queue'; // 💙💛 Koshyk Kostiantyn\n\nconst refs = {\n  libraryListOfWatched: document.querySelector('.gallery-library__list'), //<ul> з трендовими фільмами\n  btnAddToWatched: document.querySelector('.modal-movie__add-to-watched-btn'), // 💙💛 Koshyk Kostiantyn\n  btnQueue: document.querySelector('.modal-movie__add-to-queue-btn'), // 💙💛 Koshyk Kostiantyn\n};\n\nrefs.libraryListOfWatched.addEventListener('click', handleTrandingMoviesClick); //<ul> з трендовими фільмами\n\nremoveLocalStorage('watched'); // 💙💛 Koshyk Kostiantyn\nremoveLocalStorage('queue'); // 💙💛 Koshyk Kostiantyn\n\n//-----------------Основна функція------------------------------------\n\nasync function handleTrandingMoviesClick(event) {\n  // в результаті кліку на будь-яку картку фільму:\n  let pickedMovieId = event.target.dataset.id;\n\n  createArrayLocalStorage('watched'); // 💙💛 Koshyk Kostiantyn\n  createArrayLocalStorage('queue'); // 💙💛 Koshyk Kostiantyn\n\n  renameBtn(\n    refs.btnAddToWatched,\n    'watched',\n    'Add to watched',\n    'Remove from watched',\n    pickedMovieId\n  ); // 💙💛 Koshyk Kostiantyn\n  renameBtn(\n    refs.btnQueue,\n    'queue',\n    'Add to queue',\n    'Remove from queue',\n    pickedMovieId\n  ); // 💙💛 Koshyk Kostiantyn\n\n  //   // 💙💛 Koshyk Kostiantyn (для использования в add-to-watched.js)\n  dataModalFilm = fetchPictures(pickedMovieId);\n\n  if (\n    event.target.nodeName !== 'IMG' &&\n    event.target.nodeName !== 'P' &&\n    event.target.nodeName !== 'H2' &&\n    event.target.nodeName !== 'H3' &&\n    event.target.nodeName !== 'B'\n  ) {\n    return;\n  }\n\n  handleModalOpenClose();\n  handleApiData(pickedMovieId);\n\n  document.body.style.overflow = 'hidden'; //щоб body не скролився при відкритій модалці\n}\n\n// ========================= функционал для кнопок \"Add to watcheed\" и \"Add to queue\" 💙💛 Koshyk Kostiantyn\n\nlet dataModalFilm = {}; // для использования в add-to-watched.js\n\nconst btnAddToWatchedEl = document.querySelector(\n  '.modal-movie__add-to-watched-btn'\n);\nconst btnQueue = document.querySelector('.modal-movie__add-to-queue-btn');\n\nbtnAddToWatchedEl.addEventListener('click', onAddFilmToWatched);\nbtnQueue.addEventListener('click', onQueue);\n\nfunction onAddFilmToWatched() {\n  dataModalFilm.then(data => {\n    let getLocalStorage = loadFromLocalStorage('watched');\n\n    if (!getLocalStorage.includes(data.id)) {\n      getLocalStorage.push(data.id);\n      saveToLocalStorage('watched', getLocalStorage);\n\n      renameBtnTextCont(btnAddToWatchedEl, 'Remove from watched');\n      btnAddToWatchedEl.classList.add('active-btn');\n    } else {\n      const index = getLocalStorage.findIndex(el => el === data.id);\n\n      getLocalStorage.splice(index, 1);\n      localStorage.setItem('watched', JSON.stringify(getLocalStorage));\n\n      renameBtnTextCont(btnAddToWatchedEl, 'Add to watched');\n      btnAddToWatchedEl.classList.remove('active-btn');\n    }\n  });\n}\n\nfunction onQueue() {\n  dataModalFilm.then(data => {\n    let getLocalStorage = loadFromLocalStorage('queue');\n\n    if (!getLocalStorage.includes(data.id)) {\n      getLocalStorage.push(data.id);\n      saveToLocalStorage('queue', getLocalStorage);\n\n      renameBtnTextCont(btnQueue, 'Remove from queue');\n\n      btnQueue.classList.add('active-btn');\n    } else {\n      const index = getLocalStorage.findIndex(el => el === data.id);\n\n      getLocalStorage.splice(index, 1);\n      localStorage.setItem('queue', JSON.stringify(getLocalStorage));\n\n      renameBtnTextCont(btnQueue, 'Add to queue');\n      btnQueue.classList.remove('active-btn');\n    }\n  });\n}\n"],"names":["$bpxeT","parcelRequire","$bfe0251d0a73a9e6$var$refs","watchedBtn","document","querySelector","queueBtn","watchedList","textOoops","console","log","$bfe0251d0a73a9e6$var$BASE_URL","$bfe0251d0a73a9e6$var$API_KEY","$bfe0251d0a73a9e6$var$load","key","serializedState","localStorage","getItem","undefined","JSON","parse","error","message","$bfe0251d0a73a9e6$var$getMovieInfoById","movieID","$bfe0251d0a73a9e6$var$_getMovieInfoById","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","resp","respData","fetch","concat","_ctx","sent","json","addEventListener","map","el","then","data","markUp","insertAdjacentHTML","$jVDuT","makeLibraryGalleryMarkUp","$gIqCw","default","classList","add","remove","dir","$f3e59abbf028fd14$var$refs","libraryListOfWatched","btnAddToWatched","btnQueue","$f3e59abbf028fd14$var$_handleTrandingMoviesClick","event","pickedMovieId","target","dataset","id","$h4oNJ","createArrayLocalStorage","renameBtn","$f3e59abbf028fd14$var$dataModalFilm","$4mCOx","fetchPictures","nodeName","$kPudI","handleModalOpenClose","$juZTq","handleApiData","body","style","overflow","removeLocalStorage","$f3e59abbf028fd14$var$btnAddToWatchedEl","$f3e59abbf028fd14$var$btnQueue","getLocalStorage","loadFromLocalStorage","includes","index","findIndex","splice","setItem","stringify","renameBtnTextCont","push","saveToLocalStorage"],"version":3,"file":"library.fc0f1c44.js.map"}