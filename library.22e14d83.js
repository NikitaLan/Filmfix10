var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var d={id:e,exports:{}};return t[e]=d,n.call(d.exports,d,d.exports),d.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},e.parcelRequired7c6=n);document.querySelector(".btn-queue"),document.querySelector(".gallery-library__list"),document.querySelector(".empty");var d=n("fb0WN"),o=n("3hqqe"),c=n("fYdb4"),i=n("ih2xg"),r=n("gs8qp");const s={watchedBtn:document.querySelector(".btn-watched"),queueBtn:document.querySelector(".btn-queue"),watchedList:document.querySelector(".gallery-library__list"),textOoops:document.querySelector(".empty")};let l=1;const u=e=>{try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}};s.watchedBtn.addEventListener("click",v),s.watchedBtn.classList.add("active"),s.watchedBtn.addEventListener("click",(()=>{s.watchedBtn.classList.add("active"),s.queueBtn.classList.remove("active")})),s.queueBtn.addEventListener("click",(()=>{s.queueBtn.classList.add("active"),s.watchedBtn.classList.remove("active")})),window.addEventListener("load",v),s.queueBtn.addEventListener("click",(function(){if(l=2,!m)return s.textOoops.classList.remove("visually-hidden"),void(s.watchedList.innerHTML="");if(0===m.length)return s.textOoops.classList.add("visually-hidden"),void(s.watchedList.innerHTML="");y(m)}));let h=u("watched"),m=u("queue");function v(){return l=1,h?0===h.length?(console.log(20),s.textOoops.classList.add("visually-hidden"),void(s.watchedList.innerHTML="")):void y(h):(s.textOoops.classList.remove("visually-hidden"),void(s.watchedList.innerHTML=""))}async function L(e){const t=e.map((e=>async function(e){const t=await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=3dd9518c386fd347d5f1ac2580a699a4&language=en-US`);return await t.json()}(e)));return await Promise.all(t)}async function y(e){const t=await L(e);if(console.log(t),0===t.length)return s.textOoops.classList.remove("visually-hidden"),void(s.watchedList.innerHTML='<div class="empty">\n<p class="empty__text">Oops...<br> You have not added anything to your list yet.</p>\n<div class="gallery-library__bg"></div>\n</div>');const a=t.reduce(((e,t)=>e+(0,i.makeLibraryGalleryMarkUp)(t)),"");console.log(a),s.textOoops.classList.add("visually-hidden"),s.watchedList.innerHTML="",s.watchedList.classList.remove("visually-hidden"),s.watchedList.insertAdjacentHTML("beforeend",a),(0,r.default)()}window.addEventListener("load",(()=>{s.watchedBtn&&(s.watchedBtn.checked=!0,s.watchedBtn.parentNode.classList.add("checked"))}));var f=n("9C8iL");const w={libraryListOfWatched:document.querySelector(".gallery-library__list"),btnAddToWatched:document.querySelector(".modal-movie__add-to-watched-btn"),btnQueue:document.querySelector(".modal-movie__add-to-queue-btn")};w.libraryListOfWatched.addEventListener("click",(async function(e){let t=e.target.dataset.id;if((0,f.createArrayLocalStorage)("watched"),(0,f.createArrayLocalStorage)("queue"),(0,f.renameBtn)(w.btnAddToWatched,"watched","Add to watched","Remove from watched",t),(0,f.renameBtn)(w.btnQueue,"queue","Add to queue","Remove from queue",t),g=(0,o.fetchPictures)(t),"IMG"!==e.target.nodeName&&"P"!==e.target.nodeName&&"H2"!==e.target.nodeName&&"H3"!==e.target.nodeName&&"B"!==e.target.nodeName)return;(0,d.handleModalOpenClose)(),(0,c.handleApiData)(t),document.body.style.overflow="hidden"})),(0,f.removeLocalStorage)("watched"),(0,f.removeLocalStorage)("queue");let g={};const p=document.querySelector(".modal-movie__add-to-watched-btn"),q=document.querySelector(".modal-movie__add-to-queue-btn");p.addEventListener("click",(function(){g.then((e=>{let t=(0,f.loadFromLocalStorage)("watched");if(t.includes(e.id)){const a=t.findIndex((t=>t===e.id));t.splice(a,1),localStorage.setItem("watched",JSON.stringify(t)),(0,f.renameBtnTextCont)(p,"Add to watched"),p.classList.remove("active-btn"),1===l&&y(t)}else t.push(e.id),(0,f.saveToLocalStorage)("watched",t),(0,f.renameBtnTextCont)(p,"Remove from watched"),p.classList.add("active-btn"),1===l&&y(t)}))})),q.addEventListener("click",(function(){g.then((e=>{let t=(0,f.loadFromLocalStorage)("queue");if(t.includes(e.id)){const a=t.findIndex((t=>t===e.id));t.splice(a,1),localStorage.setItem("queue",JSON.stringify(t)),(0,f.renameBtnTextCont)(q,"Add to queue"),q.classList.remove("active-btn"),2===l&&y(t)}else t.push(e.id),(0,f.saveToLocalStorage)("queue",t),(0,f.renameBtnTextCont)(q,"Remove from queue"),q.classList.add("active-btn"),2===l&&y(t)}))}));
//# sourceMappingURL=library.22e14d83.js.map
