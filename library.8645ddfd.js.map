{"mappings":"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","sources":["src/js/whatched-list.js","src/js/queue-list.js","src/js/library-modal.js"],"sourcesContent":["import { makeLibraryGalleryMarkUp } from '../js/makeGalleryMarkUpCard';\nimport makeRatingColor from './ratingColor';\nconst refs = {\n  watchedBtn: document.querySelector('.btn-watched'),\n  queueBtn: document.querySelector('.btn-queue'),\n\n  watchedList: document.querySelector('.gallery-library__list'),\n  textOoops: document.querySelector('.empty'),\n};\nconsole.log(refs.queueBtn);\n\nconst STORAGE_KEY_WATCHED = 'watched';\nconst STORAGE_KEY_QUEUE = 'queue';\nconst BASE_URL = 'https://api.themoviedb.org/3/movie/';\nconst API_KEY = '3dd9518c386fd347d5f1ac2580a699a4';\n\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\nasync function getMovieInfoById(movieID) {\n  const resp = await fetch(\n    `${BASE_URL}${movieID}?api_key=${API_KEY}&language=en-US`\n  );\n  const respData = await resp.json();\n\n  return respData;\n}\n\nrefs.watchedBtn.addEventListener('click', takeListFromStorageWatched);\nrefs.queueBtn.addEventListener('click', takeListFromStorageQueue);\n\nfunction takeListFromStorageWatched() {\n  const listFromStorage = load(STORAGE_KEY_WATCHED);\n//   console.log(listFromStorage);\n//   if(!listFromStorage && listFromStorage == []) {\n//     refs.watchedList.innerHTML = ''\n//     return\n//   }\n\n  listFromStorage.map(el => {\n    getMovieInfoById(el).then(data => {\n      const markUp = refs.watchedList.insertAdjacentHTML(\n        'beforeend',\n        makeLibraryGalleryMarkUp(data)\n      );\n      makeRatingColor()\n      return markUp;\n    });\n  });\n  refs.textOoops.classList.add('visually-hidden');\n  refs.watchedList.classList.remove('visually-hidden');\n}\nconsole.dir(refs.watchedList);\nfunction takeListFromStorageQueue() {\n    const listFromStorage = load(STORAGE_KEY_QUEUE);\n    listFromStorage.map(el => {\n      getMovieInfoById(el).then(data => {\n        const markUp = refs.watchedList.insertAdjacentHTML(\n          'beforeend',\n          makeLibraryGalleryMarkUp(data)\n        );\n        makeRatingColor()\n        return markUp;\n      });\n    });\n    refs.textOoops.classList.add('visually-hidden');\n    refs.watchedList.classList.remove('visually-hidden');\n}","const refs = {\n  queueBtn: document.querySelector('.btn-queue'),\n  queueList: document.querySelector('.gallery-library__list'),\n  textOoops: document.querySelector('.empty'),\n};\n\nconst STORAGE_KEY = 'queue-list';\nlet queueList = {};\n\n// refs.watchedBtn.addEventListener('click', takeListFromStorage);\n\nfunction takeListFromStorage() {\n  console.log('click on btn Queue');\n  const listFromStorage = localStorage.getItem(STORAGE_KEY);\n  queueList = JSON.parse(listFromStorage);\n  console.log(queueList.results);\n  refs.watchedList.insertAdjacentHTML(\n    'afterbegin',\n    cardMarkup(queueList.results)\n  );\n  refs.textOoops.classList.add('visually-hidden');\n  refs.watchedList.classList.remove('visually-hidden');\n}\n","'use strict';\n\nimport { handleModalOpenClose } from './movie-modal/handle-modal-close';\nimport { fetchPictures } from './movie-modal/fetch-from-API';\nimport { handleApiData } from './movie-modal/handle-API-data';\n\nimport {\n  createArrayLocalStorage,\n  loadFromLocalStorage,\n  removeLocalStorage,\n  saveToLocalStorage,\n  renameBtn,\n  renameBtnTextCont,\n} from './watched-queue-btns/fun-watched-queue'; // 💙💛 Koshyk Kostiantyn\n\nconst refs = {\n  libraryListOfWatched: document.querySelector('.gallery-library__list'), //<ul> з трендовими фільмами\n  btnAddToWatched: document.querySelector('.modal-movie__add-to-watched-btn'), // 💙💛 Koshyk Kostiantyn\n  btnQueue: document.querySelector('.modal-movie__add-to-queue-btn'), // 💙💛 Koshyk Kostiantyn\n};\n\nrefs.libraryListOfWatched.addEventListener('click', handleTrandingMoviesClick); //<ul> з трендовими фільмами\n\nremoveLocalStorage('watched'); // 💙💛 Koshyk Kostiantyn\nremoveLocalStorage('queue'); // 💙💛 Koshyk Kostiantyn\n\n//-----------------Основна функція------------------------------------\n\nasync function handleTrandingMoviesClick(event) {\n  // в результаті кліку на будь-яку картку фільму:\n  let pickedMovieId = event.target.dataset.id;\n\n  createArrayLocalStorage('watched'); // 💙💛 Koshyk Kostiantyn\n  createArrayLocalStorage('queue'); // 💙💛 Koshyk Kostiantyn\n\n  renameBtn(\n    refs.btnAddToWatched,\n    'watched',\n    'Add to watched',\n    'Remove from watched',\n    pickedMovieId\n  ); // 💙💛 Koshyk Kostiantyn\n  renameBtn(\n    refs.btnQueue,\n    'queue',\n    'Add to queue',\n    'Remove from queue',\n    pickedMovieId\n  ); // 💙💛 Koshyk Kostiantyn\n\n  //   // 💙💛 Koshyk Kostiantyn (для использования в add-to-watched.js)\n  dataModalFilm = fetchPictures(pickedMovieId);\n\n  if (\n    event.target.nodeName !== 'IMG' &&\n    event.target.nodeName !== 'P' &&\n    event.target.nodeName !== 'H2' &&\n    event.target.nodeName !== 'H3' &&\n    event.target.nodeName !== 'B'\n  ) {\n    return;\n  }\n\n  handleModalOpenClose();\n  handleApiData(pickedMovieId);\n\n  document.body.style.overflow = 'hidden'; //щоб body не скролився при відкритій модалці\n}\n\n// ========================= функционал для кнопок \"Add to watcheed\" и \"Add to queue\" 💙💛 Koshyk Kostiantyn\n\nlet dataModalFilm = {}; // для использования в add-to-watched.js\n\nconst btnAddToWatchedEl = document.querySelector(\n  '.modal-movie__add-to-watched-btn'\n);\nconst btnQueue = document.querySelector('.modal-movie__add-to-queue-btn');\n\nbtnAddToWatchedEl.addEventListener('click', onAddFilmToWatched);\nbtnQueue.addEventListener('click', onQueue);\n\nfunction onAddFilmToWatched() {\n  dataModalFilm.then(data => {\n    let getLocalStorage = loadFromLocalStorage('watched');\n\n    if (!getLocalStorage.includes(data.id)) {\n      getLocalStorage.push(data.id);\n      saveToLocalStorage('watched', getLocalStorage);\n\n      renameBtnTextCont(btnAddToWatchedEl, 'Remove from watched');\n      btnAddToWatchedEl.classList.add('active-btn');\n    } else {\n      const index = getLocalStorage.findIndex(el => el === data.id);\n\n      getLocalStorage.splice(index, 1);\n      localStorage.setItem('watched', JSON.stringify(getLocalStorage));\n\n      renameBtnTextCont(btnAddToWatchedEl, 'Add to watched');\n      btnAddToWatchedEl.classList.remove('active-btn');\n    }\n  });\n}\n\nfunction onQueue() {\n  dataModalFilm.then(data => {\n    let getLocalStorage = loadFromLocalStorage('queue');\n\n    if (!getLocalStorage.includes(data.id)) {\n      getLocalStorage.push(data.id);\n      saveToLocalStorage('queue', getLocalStorage);\n\n      renameBtnTextCont(btnQueue, 'Remove from queue');\n\n      btnQueue.classList.add('active-btn');\n    } else {\n      const index = getLocalStorage.findIndex(el => el === data.id);\n\n      getLocalStorage.splice(index, 1);\n      localStorage.setItem('queue', JSON.stringify(getLocalStorage));\n\n      renameBtnTextCont(btnQueue, 'Add to queue');\n      btnQueue.classList.remove('active-btn');\n    }\n  });\n}\n"],"names":["$ih2xg","parcelRequire","$1c5b06acbec3a93f$var$refs","watchedBtn","document","querySelector","queueBtn","watchedList","textOoops","console","log","$1c5b06acbec3a93f$var$load","key","serializedState","localStorage","getItem","undefined","JSON","parse","error","message","async","$1c5b06acbec3a93f$var$getMovieInfoById","movieID","resp","fetch","json","addEventListener","map","el","then","data","markUp","insertAdjacentHTML","makeLibraryGalleryMarkUp","$gs8qp","default","classList","add","remove","dir","$fb0WN","$da48e4bca1361a11$var$refs","libraryListOfWatched","btnAddToWatched","btnQueue","event","pickedMovieId","target","dataset","id","$9C8iL","createArrayLocalStorage","renameBtn","$da48e4bca1361a11$var$dataModalFilm","$3hqqe","fetchPictures","nodeName","handleModalOpenClose","$fYdb4","handleApiData","body","style","overflow","removeLocalStorage","$da48e4bca1361a11$var$btnAddToWatchedEl","$da48e4bca1361a11$var$btnQueue","getLocalStorage","loadFromLocalStorage","includes","index","findIndex","splice","setItem","stringify","renameBtnTextCont","push","saveToLocalStorage"],"version":3,"file":"library.8645ddfd.js.map"}