!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var d=new Error("Cannot find module '"+e+"'");throw d.code="MODULE_NOT_FOUND",d}).register=function(e,t){a[e]=t},t.parcelRequired7c6=r);document.querySelector(".btn-queue"),document.querySelector(".gallery-library__list"),document.querySelector(".empty");var d=r("bpxeT"),o=r("2TvXO"),c=r("kPudI"),i=r("4mCOx"),u=r("juZTq"),l=r("jVDuT"),s=r("gIqCw"),v=r("h4oNJ"),m={watchedBtn:document.querySelector(".btn-watched"),queueBtn:document.querySelector(".btn-queue"),watchedList:document.querySelector(".gallery-library__list"),textOoops:document.querySelector(".empty")},f=1;function h(){var e=(0,v.loadFromLocalStorage)("watched");if(f=1,0===e.length)return m.textOoops.classList.remove("visually-hidden"),void(m.watchedList.innerHTML="");L(e)}function L(e){var t=e;if(0===t.length)return m.textOoops.classList.remove("visually-hidden"),void(m.watchedList.innerHTML="");var n=t.reduce((function(e,t){return e+(0,l.makeLibraryGalleryMarkUp)(t)}),"");m.textOoops.classList.add("visually-hidden"),m.watchedList.innerHTML="",m.watchedList.classList.remove("visually-hidden"),m.watchedList.insertAdjacentHTML("beforeend",n),(0,s.default)()}m.watchedBtn.classList.add("active"),m.watchedBtn.addEventListener("click",(function(){m.watchedBtn.classList.add("active"),m.queueBtn.classList.remove("active")})),m.queueBtn.addEventListener("click",(function(){m.queueBtn.classList.add("active"),m.watchedBtn.classList.remove("active")})),window.addEventListener("load",h),m.watchedBtn.addEventListener("click",h),m.queueBtn.addEventListener("click",(function(){var e=(0,v.loadFromLocalStorage)("queue");if(f=2,0===e.length)return m.textOoops.classList.remove("visually-hidden"),void(m.watchedList.innerHTML="");L(e)})),window.addEventListener("load",(function(){m.watchedBtn&&(m.watchedBtn.checked=!0,m.watchedBtn.parentNode.classList.add("checked"))}));v=r("h4oNJ");var w={libraryListOfWatched:document.querySelector(".gallery-library__list"),btnAddToWatched:document.querySelector(".modal-movie__add-to-watched-btn"),btnQueue:document.querySelector(".modal-movie__add-to-queue-btn")};function y(){return(y=e(d)(e(o).mark((function t(n){var a;return e(o).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.target.dataset.id,(0,v.createArrayLocalStorage)("watched"),(0,v.createArrayLocalStorage)("queue"),(0,v.renameBtn)(w.btnAddToWatched,"watched","Add to watched","Remove from watched",a),(0,v.renameBtn)(w.btnQueue,"queue","Add to queue","Remove from queue",a),p=(0,i.fetchPictures)(a),"IMG"===n.target.nodeName||"P"===n.target.nodeName||"H2"===n.target.nodeName||"H3"===n.target.nodeName||"B"===n.target.nodeName){e.next=8;break}return e.abrupt("return");case 8:(0,c.handleModalOpenClose)(),(0,u.handleApiData)(a),document.body.style.overflow="hidden";case 11:case"end":return e.stop()}}),t)})))).apply(this,arguments)}w.libraryListOfWatched.addEventListener("click",(function(e){return y.apply(this,arguments)})),(0,v.removeLocalStorage)("watched"),(0,v.removeLocalStorage)("queue");var p={},q=document.querySelector(".modal-movie__add-to-watched-btn"),g=document.querySelector(".modal-movie__add-to-queue-btn");q.addEventListener("click",(function(){p.then((function(e){var t=(0,v.loadFromLocalStorage)("watched");if(t.find((function(t){return t.id===e.id}))){var n=t.findIndex((function(t){return t.id===e.id}));t.splice(n,1),localStorage.setItem("watched",JSON.stringify(t)),(0,v.renameBtnTextCont)(q,"Add to watched"),q.classList.remove("active-btn"),1===f&&L(t)}else t.push(e),(0,v.saveToLocalStorage)("watched",t),(0,v.renameBtnTextCont)(q,"Remove from watched"),q.classList.add("active-btn"),1===f&&L(t)}))})),g.addEventListener("click",(function(){p.then((function(e){var t=(0,v.loadFromLocalStorage)("queue");if(t.find((function(t){return t.id===e.id}))){var n=t.findIndex((function(t){return t.id===e.id}));t.splice(n,1),localStorage.setItem("queue",JSON.stringify(t)),(0,v.renameBtnTextCont)(g,"Add to queue"),g.classList.remove("active-btn"),2===f&&L(t)}else t.push(e),(0,v.saveToLocalStorage)("queue",t),(0,v.renameBtnTextCont)(g,"Remove from queue"),g.classList.add("active-btn"),2===f&&L(t)}))})),r("7F1pg")}();
//# sourceMappingURL=library.54585c42.js.map
