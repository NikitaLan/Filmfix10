{"mappings":"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","sources":["src/js/queue-list.js","src/js/library-modal.js","src/js/whatched-list.js"],"sourcesContent":["const refs = {\n  queueBtn: document.querySelector('.btn-queue'),\n  queueList: document.querySelector('.gallery-library__list'),\n  textOoops: document.querySelector('.empty'),\n};\n\nconst STORAGE_KEY = 'queue-list';\nlet queueList = {};\n\n// refs.watchedBtn.addEventListener('click', takeListFromStorage);\n\nfunction takeListFromStorage() {\n  console.log('click on btn Queue');\n  const listFromStorage = localStorage.getItem(STORAGE_KEY);\n  queueList = JSON.parse(listFromStorage);\n  console.log(queueList.results);\n  refs.watchedList.insertAdjacentHTML(\n    'afterbegin',\n    cardMarkup(queueList.results)\n  );\n  refs.textOoops.classList.add('visually-hidden');\n  refs.watchedList.classList.remove('visually-hidden');\n}\n","'use strict';\n\nimport { handleModalOpenClose } from './movie-modal/handle-modal-close';\nimport { fetchPictures } from './movie-modal/fetch-from-API';\nimport { handleApiData } from './movie-modal/handle-API-data';\nimport {PAGE_OPEN, renderList} from './whatched-list';\n\nimport {\n  createArrayLocalStorage,\n  loadFromLocalStorage,\n  removeLocalStorage,\n  saveToLocalStorage,\n  renameBtn,\n  renameBtnTextCont,\n} from './watched-queue-btns/fun-watched-queue'; // 💙💛 Koshyk Kostiantyn\n\nconst refs = {\n  libraryListOfWatched: document.querySelector('.gallery-library__list'), //<ul> з трендовими фільмами\n  btnAddToWatched: document.querySelector('.modal-movie__add-to-watched-btn'), // 💙💛 Koshyk Kostiantyn\n  btnQueue: document.querySelector('.modal-movie__add-to-queue-btn'), // 💙💛 Koshyk Kostiantyn\n};\n\nrefs.libraryListOfWatched.addEventListener('click', handleTrandingMoviesClick); //<ul> з трендовими фільмами\n\nremoveLocalStorage('watched'); // 💙💛 Koshyk Kostiantyn\nremoveLocalStorage('queue'); // 💙💛 Koshyk Kostiantyn\n\n//-----------------Основна функція------------------------------------\n\nasync function handleTrandingMoviesClick(event) {\n  // в результаті кліку на будь-яку картку фільму:\n  let pickedMovieId = event.target.dataset.id;\n\n  createArrayLocalStorage('watched'); // 💙💛 Koshyk Kostiantyn\n  createArrayLocalStorage('queue'); // 💙💛 Koshyk Kostiantyn\n\n  renameBtn(\n    refs.btnAddToWatched,\n    'watched',\n    'Add to watched',\n    'Remove from watched',\n    pickedMovieId\n  ); // 💙💛 Koshyk Kostiantyn\n  renameBtn(\n    refs.btnQueue,\n    'queue',\n    'Add to queue',\n    'Remove from queue',\n    pickedMovieId\n  ); // 💙💛 Koshyk Kostiantyn\n\n  //   // 💙💛 Koshyk Kostiantyn (для использования в add-to-watched.js)\n  dataModalFilm = fetchPictures(pickedMovieId);\n\n  if (\n    event.target.nodeName !== 'IMG' &&\n    event.target.nodeName !== 'P' &&\n    event.target.nodeName !== 'H2' &&\n    event.target.nodeName !== 'H3' &&\n    event.target.nodeName !== 'B'\n  ) {\n    return;\n  }\n\n  handleModalOpenClose();\n  handleApiData(pickedMovieId);\n\n  document.body.style.overflow = 'hidden'; //щоб body не скролився при відкритій модалці\n}\n\n// ========================= функционал для кнопок \"Add to watcheed\" и \"Add to queue\" 💙💛 Koshyk Kostiantyn\n\nlet dataModalFilm = {}; // для использования в add-to-watched.js\n\nconst btnAddToWatchedEl = document.querySelector(\n  '.modal-movie__add-to-watched-btn'\n);\nconst btnQueue = document.querySelector('.modal-movie__add-to-queue-btn');\n\nbtnAddToWatchedEl.addEventListener('click', onAddFilmToWatched);\nbtnQueue.addEventListener('click', onQueue);\n\nfunction onAddFilmToWatched() {\n  dataModalFilm.then(data => {\n    let getLocalStorage = loadFromLocalStorage('watched');\n\n    if (!getLocalStorage.includes(data.id)) {\n      getLocalStorage.push(data.id);\n      saveToLocalStorage('watched', getLocalStorage);\n\n      renameBtnTextCont(btnAddToWatchedEl, 'Remove from watched');\n      btnAddToWatchedEl.classList.add('active-btn');\n     if(PAGE_OPEN === 1) {\n          renderList(getLocalStorage)\n     }\n  \n    } else {\n      const index = getLocalStorage.findIndex(el => el === data.id);\n\n      getLocalStorage.splice(index, 1);\n      localStorage.setItem('watched', JSON.stringify(getLocalStorage));\n\n      renameBtnTextCont(btnAddToWatchedEl, 'Add to watched');\n      btnAddToWatchedEl.classList.remove('active-btn');\n      if(PAGE_OPEN === 1) {\n        renderList(getLocalStorage)\n   }\n    }\n  });\n}\n\nfunction onQueue() {\n  dataModalFilm.then(data => {\n    let getLocalStorage = loadFromLocalStorage('queue');\n\n    if (!getLocalStorage.includes(data.id)) {\n      getLocalStorage.push(data.id);\n      saveToLocalStorage('queue', getLocalStorage);\n\n      renameBtnTextCont(btnQueue, 'Remove from queue');\n\n      btnQueue.classList.add('active-btn');\n      if(PAGE_OPEN === 2) {\n        renderList(getLocalStorage)\n   }\n    } else {\n      const index = getLocalStorage.findIndex(el => el === data.id);\n\n      getLocalStorage.splice(index, 1);\n      localStorage.setItem('queue', JSON.stringify(getLocalStorage));\n\n      renameBtnTextCont(btnQueue, 'Add to queue');\n      btnQueue.classList.remove('active-btn');\n      if(PAGE_OPEN === 2) {\n        renderList(getLocalStorage)\n   }\n    }\n  });\n}\n","import { makeLibraryGalleryMarkUp } from '../js/makeGalleryMarkUpCard';\nimport makeRatingColor from './ratingColor';\nconst refs = {\n  watchedBtn: document.querySelector('.btn-watched'),\n  queueBtn: document.querySelector('.btn-queue'),\n\n  watchedList: document.querySelector('.gallery-library__list'),\n  textOoops: document.querySelector('.empty'),\n};\n\nconst STORAGE_KEY_WATCHED = 'watched';\nconst STORAGE_KEY_QUEUE = 'queue';\nconst BASE_URL = 'https://api.themoviedb.org/3/movie/';\nconst API_KEY = '3dd9518c386fd347d5f1ac2580a699a4';\n\nexport let PAGE_OPEN = 1;\nconst load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState=== null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nrefs.watchedBtn.addEventListener('click', onLibWatchedBtnClick);\n\n\nrefs.watchedBtn.classList.add('active');\n\nrefs.watchedBtn.addEventListener('click', () => {\n    refs.watchedBtn.classList.add('active');\n  refs.queueBtn.classList.remove('active');\n});\n\nrefs.queueBtn.addEventListener('click', () => {\n    refs.queueBtn.classList.add('active');\n    refs.watchedBtn.classList.remove('active');\n});\n\n\nwindow.addEventListener('load', onLibWatchedBtnClick);\n\nrefs.queueBtn.addEventListener('click', onLibQueueBtnClick);\n\n\nlet watched = load(STORAGE_KEY_WATCHED);\nlet queue = load(STORAGE_KEY_QUEUE);\n\nfunction onLibWatchedBtnClick() {\n    PAGE_OPEN = 1;\n    if(!watched) {\n\n        refs.textOoops.classList.remove('visually-hidden');\n        refs.watchedList.innerHTML = '';\n        return\n    } else if (watched.length === 0) {\nconsole.log(20);\nrefs.textOoops.classList.add('visually-hidden');\nrefs.watchedList.innerHTML = '';\n         return;\n       } \n       renderList(watched)\n}\nfunction onLibQueueBtnClick() {\n    PAGE_OPEN = 2;\n    if(!queue) {\n        refs.textOoops.classList.remove('visually-hidden');\n        refs.watchedList.innerHTML = '';\n        return\n    } else if (queue.length === 0) {\nrefs.textOoops.classList.add('visually-hidden');\nrefs.watchedList.innerHTML = '';\n         return;\n       }\n       renderList(queue)\n}\n\n\nasync function getFilmInfoById(movieID) {\n  const resp = await fetch(\n    `${BASE_URL}${movieID}?api_key=${API_KEY}&language=en-US`\n  );\n  const respData = await resp.json();\n\n  return respData;\n}\n\nasync function getFilmList(array) {\n    const filmPromises = array.map(el => getFilmInfoById(el));\n    const filmList = await Promise.all(filmPromises);\n    return filmList;\n}\n\nexport async function renderList(array) {\n  \n    const filmList = await getFilmList(array);\n    console.log(filmList);\n    if(filmList.length === 0) {\nrefs.textOoops.classList.remove('visually-hidden');\nrefs.watchedList.innerHTML = `<div class=\"empty\">\n<p class=\"empty__text\">Oops...<br> You have not added anything to your list yet.</p>\n<div class=\"gallery-library__bg\"></div>\n</div>`\nreturn;\n    }\n\n    const watchedList = makeList(filmList);\n    console.log(watchedList);\n    refs.textOoops.classList.add('visually-hidden');\n    refs.watchedList.innerHTML = '';\n    refs.watchedList.classList.remove('visually-hidden');\n    refs.watchedList.insertAdjacentHTML('beforeend', watchedList)\n    makeRatingColor()\n\n    function makeList(array) {\n      return array.reduce((acc, el) => {\n        return acc + makeLibraryGalleryMarkUp(el);\n      }, '');\n    }\n}\n\nwindow.addEventListener('load', () => {\n    if (refs.watchedBtn) {\n        refs.watchedBtn.checked = true;\n      refs.watchedBtn.parentNode.classList.add('checked');\n    }\n  });\n\n\n\n// function takeListFromStorageWatched() {\n//   const listFromStorage = load(STORAGE_KEY_WATCHED);\n// //   console.log(listFromStorage);\n// //   if(!listFromStorage && listFromStorage == []) {\n// //     refs.watchedList.innerHTML = ''\n// //     return\n// //   }\n\n//   listFromStorage.map(el => {\n//     getMovieInfoById(el).then(data => {\n//       const markUp = refs.watchedList.insertAdjacentHTML(\n//         'beforeend',\n//         makeLibraryGalleryMarkUp(data)\n//       );\n//       makeRatingColor()\n//       return markUp;\n//     });\n//   });\n//   refs.textOoops.classList.add('visually-hidden');\n//   refs.watchedList.classList.remove('visually-hidden');\n// }\n// console.dir(refs.watchedList);\n// function takeListFromStorageQueue() {\n//     const listFromStorage = load(STORAGE_KEY_QUEUE);\n//     listFromStorage.map(el => {\n//       getMovieInfoById(el).then(data => {\n//         const markUp = refs.watchedList.insertAdjacentHTML(\n//           'beforeend',\n//           makeLibraryGalleryMarkUp(data)\n//         );\n//         makeRatingColor()\n//         return markUp;\n//       });\n//     });\n//     refs.textOoops.classList.add('visually-hidden');\n//     refs.watchedList.classList.remove('visually-hidden');\n// }"],"names":["document","querySelector","$bpxeT","parcelRequire","$bfe0251d0a73a9e6$var$refs","watchedBtn","queueBtn","watchedList","textOoops","$bfe0251d0a73a9e6$var$BASE_URL","$bfe0251d0a73a9e6$var$API_KEY","$bfe0251d0a73a9e6$export$c4328c96217f7292","$bfe0251d0a73a9e6$var$load","key","serializedState","localStorage","getItem","undefined","JSON","parse","error","console","message","addEventListener","$bfe0251d0a73a9e6$var$onLibWatchedBtnClick","classList","add","remove","window","$bfe0251d0a73a9e6$var$queue","innerHTML","length","$bfe0251d0a73a9e6$export$4bf387f59bfc6d67","$bfe0251d0a73a9e6$var$watched","log","$bfe0251d0a73a9e6$var$getFilmInfoById","movieID","$bfe0251d0a73a9e6$var$_getFilmInfoById","apply","this","arguments","$parcel$interopDefault","$2TvXO","mark","_callee","resp","respData","fetch","concat","_ctx","sent","json","$bfe0251d0a73a9e6$var$getFilmList","array","$bfe0251d0a73a9e6$var$_getFilmList","filmPromises","filmList","map","el","Promise","all","array1","$bfe0251d0a73a9e6$var$_renderList","makeList","reduce","acc","$jVDuT","makeLibraryGalleryMarkUp","insertAdjacentHTML","$gIqCw","default","checked","parentNode","$f3e59abbf028fd14$var$refs","libraryListOfWatched","btnAddToWatched","btnQueue","$f3e59abbf028fd14$var$_handleTrandingMoviesClick","event","pickedMovieId","target","dataset","id","$h4oNJ","createArrayLocalStorage","renameBtn","$f3e59abbf028fd14$var$dataModalFilm","$4mCOx","fetchPictures","nodeName","$kPudI","handleModalOpenClose","$juZTq","handleApiData","body","style","overflow","removeLocalStorage","$f3e59abbf028fd14$var$btnAddToWatchedEl","$f3e59abbf028fd14$var$btnQueue","then","data","getLocalStorage","loadFromLocalStorage","includes","index","findIndex","splice","setItem","stringify","renameBtnTextCont","push","saveToLocalStorage"],"version":3,"file":"library.74dd38fb.js.map"}