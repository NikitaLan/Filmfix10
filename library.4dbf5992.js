!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},t.parcelRequired7c6=a);document.querySelector(".btn-queue"),document.querySelector(".gallery-library__list"),document.querySelector(".empty");var o=a("bpxeT"),c=a("2TvXO"),d=a("kPudI"),i=a("4mCOx"),u=a("juZTq"),s=(o=a("bpxeT"),c=a("2TvXO"),a("jVDuT")),l=a("gIqCw"),f={watchedBtn:document.querySelector(".btn-watched"),queueBtn:document.querySelector(".btn-queue"),watchedList:document.querySelector(".gallery-library__list"),textOoops:document.querySelector(".empty")},v="https://api.themoviedb.org/3/movie/",h="3dd9518c386fd347d5f1ac2580a699a4",m=1,p=function(e){try{var t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.error("Get state error: ",e.message)}};function w(){var e=p("watched");if(m=1,0===e.length)return f.textOoops.classList.remove("visually-hidden"),void(f.watchedList.innerHTML="");console.log(e),q(e)}function y(e){return L.apply(this,arguments)}function L(){return(L=e(o)(e(c).mark((function t(n){var r,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(v).concat(n,"?api_key=").concat(h,"&language=en-US"));case 2:return r=e.sent,e.next=5,r.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function g(e){return b.apply(this,arguments)}function b(){return(b=e(o)(e(c).mark((function t(n){var r,a;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.map((function(e){return y(e)})),e.next=3,Promise.all(r);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function q(e){return x.apply(this,arguments)}function x(){return(x=e(o)(e(c).mark((function t(n){var r,a,o;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){return e.reduce((function(e,t){return e+(0,s.makeLibraryGalleryMarkUp)(t)}),"")},e.next=3,g(n);case 3:if(0!==(r=e.sent).length){e.next=8;break}return f.textOoops.classList.remove("visually-hidden"),f.watchedList.innerHTML="",e.abrupt("return");case 8:a=o(r),f.textOoops.classList.add("visually-hidden"),f.watchedList.innerHTML="",f.watchedList.classList.remove("visually-hidden"),f.watchedList.insertAdjacentHTML("beforeend",a),(0,l.default)();case 15:case"end":return e.stop()}}),t)})))).apply(this,arguments)}f.watchedBtn.classList.add("active"),f.watchedBtn.addEventListener("click",(function(){f.watchedBtn.classList.add("active"),f.queueBtn.classList.remove("active")})),f.queueBtn.addEventListener("click",(function(){f.queueBtn.classList.add("active"),f.watchedBtn.classList.remove("active")})),window.addEventListener("load",w),f.watchedBtn.addEventListener("click",w),f.queueBtn.addEventListener("click",(function(){var e=p("queue");if(m=2,0===e.length)return f.textOoops.classList.remove("visually-hidden"),void(f.watchedList.innerHTML="");q(e)})),window.addEventListener("load",(function(){f.watchedBtn&&(f.watchedBtn.checked=!0,f.watchedBtn.parentNode.classList.add("checked"))}));var S=a("h4oNJ"),T={libraryListOfWatched:document.querySelector(".gallery-library__list"),btnAddToWatched:document.querySelector(".modal-movie__add-to-watched-btn"),btnQueue:document.querySelector(".modal-movie__add-to-queue-btn")};function B(){return(B=e(o)(e(c).mark((function t(n){var r;return e(c).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.target.dataset.id,(0,S.createArrayLocalStorage)("watched"),(0,S.createArrayLocalStorage)("queue"),(0,S.renameBtn)(T.btnAddToWatched,"watched","Add to watched","Remove from watched",r),(0,S.renameBtn)(T.btnQueue,"queue","Add to queue","Remove from queue",r),k=(0,i.fetchPictures)(r),"IMG"===n.target.nodeName||"P"===n.target.nodeName||"H2"===n.target.nodeName||"H3"===n.target.nodeName||"B"===n.target.nodeName){e.next=8;break}return e.abrupt("return");case 8:(0,d.handleModalOpenClose)(),(0,u.handleApiData)(r),document.body.style.overflow="hidden";case 11:case"end":return e.stop()}}),t)})))).apply(this,arguments)}T.libraryListOfWatched.addEventListener("click",(function(e){return B.apply(this,arguments)})),(0,S.removeLocalStorage)("watched"),(0,S.removeLocalStorage)("queue");var k={},_=document.querySelector(".modal-movie__add-to-watched-btn"),O=document.querySelector(".modal-movie__add-to-queue-btn");_.addEventListener("click",(function(){k.then((function(e){var t=(0,S.loadFromLocalStorage)("watched");if(t.includes(e.id)){var n=t.findIndex((function(t){return t===e.id}));t.splice(n,1),localStorage.setItem("watched",JSON.stringify(t)),(0,S.renameBtnTextCont)(_,"Add to watched"),_.classList.remove("active-btn"),1===m&&q(t)}else t.push(e.id),(0,S.saveToLocalStorage)("watched",t),(0,S.renameBtnTextCont)(_,"Remove from watched"),_.classList.add("active-btn"),1===m&&q(t)}))})),O.addEventListener("click",(function(){k.then((function(e){var t=(0,S.loadFromLocalStorage)("queue");if(t.includes(e.id)){var n=t.findIndex((function(t){return t===e.id}));t.splice(n,1),localStorage.setItem("queue",JSON.stringify(t)),(0,S.renameBtnTextCont)(O,"Add to queue"),O.classList.remove("active-btn"),2===m&&q(t)}else t.push(e.id),(0,S.saveToLocalStorage)("queue",t),(0,S.renameBtnTextCont)(O,"Remove from queue"),O.classList.add("active-btn"),2===m&&q(t)}))})),a("7F1pg")}();
//# sourceMappingURL=library.4dbf5992.js.map
